{"version":3,"sources":["webpack:///./frontend/components/album/album_audio_player.js"],"names":["AlbumAudioPlayer","props","state","currentTime","duration","user","counter","loaded","loading","btn","nextSong","bind","previousSong","getTime","aud","document","getElementById","value","audio1","addEventListener","e","setState","target","seekbar1","removeEventListener","source1","src","split","play","flipAudiobtn","pause","time","isNaN","Math","floor","slice","songListLength","src_url","songs","length","song_url","load","pauseTrack","buffered","dur","ct","AlLength","ended","flipPausebtn","ref","max","playTrack","faSpinner","titles","faChevronLeft","faChevronRight","React","Component"],"mappings":"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","file":"3.bundle.js","sourcesContent":["import React from \"react\";\nimport { faChevronRight, faChevronLeft, faSpinner } from \"@fortawesome/free-solid-svg-icons\";\nimport { FontAwesomeIcon } from \"@fortawesome/react-fontawesome\";\n\nclass AlbumAudioPlayer extends React.Component {\n    constructor(props) {\n        super(props); \n        this.state = { \n            currentTime: 0,  // current time in song\n            duration: 0,     // lists full time of song\n            user: false,\n            counter: 0,   // tracks songs in album\n            loaded: false, // flip to true after first to satisfy conditional in componentDidUpdate which loads song\n            loading: false,  // tracks whether to show buffer symbol\n            btn: false,\n        };\n        this.nextSong = this.nextSong.bind(this);\n        this.previousSong = this.previousSong.bind(this);\n        this.getTime = this.getTime.bind(this);\n    }\n\n    componentDidMount() {\n        let aud = document.getElementById(\"audio-track2\");\n        aud.value = \"0\";\n        this.audio1.addEventListener('loadedmetadata', (e) => {\n            this.setState({\n                duration: e.target.duration\n            })\n        });\n\n        this.audio1.addEventListener(\"timeupdate\", (e) => {\n            this.setState({\n                currentTime: e.target.currentTime,\n            });\n        });\n\n        this.audio1.addEventListener(\"timeupdate\", (e) => {\n            this.seekbar1.value = e.target.currentTime;\n        });\n    }\n\n    componentWillUnmount() {\n        this.audio1.removeEventListener(\"timeupdate\", () => { });\n        this.audio1.removeEventListener(\"loadedmetadata\", () => { });\n    }\n\n    playTrack() {\n      if (this.source1.src.split(\"http://localhost:3000/\")[1] !== \"\") {\n        this.audio1.play();\n        this.flipAudiobtn();\n      }\n    }\n\n    pauseTrack() {\n      this.audio1.pause();\n      this.flipAudiobtn();\n    }\n\n    flipAudiobtn() {\n      this.setState({\n        btn: !this.state.btn\n      })\n    }\n    \n    getTime(time) {\n        if (!isNaN(time)) {\n            return Math.floor(time / 60) + \":\" + (\"0\" + Math.floor(time % 60)).slice(-2);\n        }\n    }\n        \n    nextSong(songListLength) {\n        if (this.state.counter < songListLength - 1) {\n            this.setState({\n                counter: this.state.counter + 1,\n                loaded: false,\n                loading: true\n            })\n        }\n    }\n    \n    previousSong() {\n        if (this.state.counter >= 1) {\n            this.setState({\n                counter: this.state.counter - 1,\n                loaded: false,\n                loading: true\n            })\n        }\n    }\n\n    componentDidUpdate() {\n      let src_url = this.props.songs.length ? this.props.songs[this.state.counter].song_url : \"\";\n      \n      if (this.state.loaded && this.props.songs.length === 0) {\n        this.setState({\n          loaded: false\n        })\n      }\n\n      if (this.source1 && src_url !== \"\" && this.state.loaded === false) {\n          this.source1.src = src_url;\n          this.audio1.pause();\n          this.audio1.load();\n          this.pauseTrack();\n          this.setState({\n              ...this.state,\n              loaded: true,\n          })\n      }\n\n      if (this.audio1.buffered.length === 1 && this.state.loading) {\n          this.setState({\n              loading:false\n          })\n      }\n    \n      if (this.props.songs.length === 0 && this.state.counter !== 0) {\n        this.setState({\n          counter: 0,\n        })\n      }\n\n      // loads audio to remove buffered audio (no TimeRanges obj) and sets duration to 0 so\n      // upon changing albums song duration === to '0:00' instead of the duration of buffered song\n      if (this.props.songs.length === 0 && this.audio1.buffered.length === 1 && this.source1) {\n        this.audio1.load();\n        this.setState({\n          duration:0,\n        })\n      }\n\n    }\n   \n    render() {\n        const dur = this.getTime(this.state.duration);\n        const ct = this.getTime(this.state.currentTime);\n    \n        const AlLength = this.props.songs.length;\n        \n        let src_url = this.props.songs.length ? this.props.songs[this.state.counter].song_url : \"\";\n\n        if (this.state.counter === this.props.songs.length && this.props.songs) {\n          let src_url = this.props.songs.length ? this.props.songs[this.state.counter-1].song_url : \"\";\n        } \n        \n        if (document.getElementById('ply1')) {\n            if (this.audio1.ended) {\n                this.audio1.currentTime = 0;\n                this.flipPausebtn();\n            }\n        }\n        \n        return (\n          <>\n            <div id=\"audio-player2\">\n              <audio\n                id=\"ply1\"\n                ref={(ref) => (this.audio1 = ref)}\n                type=\"audio/mpeg\"\n                preload=\"auto\"\n                onLoadedMetadata={() =>\n                  (this.seekbar1.max = this.audio1.duration)\n                }\n              >\n                <source\n                  ref={(ref) => (this.source1 = ref)}\n                  id=\"src2\"\n                  src={src_url}\n                />\n              </audio>\n              <div className=\"btns2\">\n                <div id=\"timer2\"></div>\n                {!this.state.loading ? (\n                  <div\n                    className={this.state.btn ? \"disappear\" : \"\"}\n                    id=\"play-btn2\"\n                    onClick={() => {\n                      this.playTrack();\n                      // this.flipAudiobtn();\n                    }}\n                  ></div>\n                ) : (\n                  <FontAwesomeIcon icon={faSpinner} />\n                )}\n                <div\n                  className={this.state.btn ? \"\" : \"disappear\"}\n                  id=\"pause-btn2\"\n                  onClick={() => {\n                    this.pauseTrack();\n                    // this.flipAudiobtn();\n                  }}\n                ></div>\n              </div>\n              <div className=\"audio-label2\">\n                <div className=\"weekly-label\">\n                  <div className=\"timer2\">\n                    <span id=\"curTimeText\">{ct}</span>/\n                    <span id=\"durTimeText\">{dur}</span>\n                  </div>\n                  <h3 className=\"weekly\">\n                    Title: {this.props.titles[this.state.counter]}\n                  </h3>\n                  <div id=\"space-it-out\">\n                    <button\n                      className=\"next-song-arrow\"\n                      onClick={() => this.previousSong()}\n                    >\n                      <FontAwesomeIcon icon={faChevronLeft} />\n                    </button>\n                    <button\n                      className=\"next-song-arrow\"\n                      onClick={() => this.nextSong(AlLength)}\n                    >\n                      <FontAwesomeIcon icon={faChevronRight} />\n                    </button>\n                  </div>\n                </div>\n                <div className=\"lower-label\">\n                  <input\n                    ref={(ref) => (this.seekbar1 = ref)}\n                    type=\"range\"\n                    min=\"0\"\n                    step=\"0.01\"\n                    id=\"audio-track2\"\n                    onChange={() =>\n                      (this.audio1.currentTime = this.seekbar1.value)\n                    }\n                  ></input>\n                </div>\n              </div>\n            </div>\n          </>\n        );\n    }\n}\n\nexport default AlbumAudioPlayer;\n\n"],"sourceRoot":""}